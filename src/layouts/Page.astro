---
import Layout from './Base.astro'

import Card from '../components/Card.astro'
import CardBlock from '../components/CardBlock.astro'
import HeroBlock from '../components/HeroBlock.astro'
import ImageBlock from '../components/ImageBlock.astro'
import NewsletterBlock from '../components/NewsletterBlock.astro'
import TextBlock from '../components/TextBlock.astro'

interface Props {
  content: Page
}

const { content } = Astro.props as Props;
const { title, description, image, blocks } = content;
---

<Layout title={title} description={description} image={image} pathname={Astro.request.url.pathname} canonicalURL={Astro.request.canonicalURL}>
  {blocks.map(({ template, ...data }) => {
    switch (template) {
      case "cardblock":
        return (<CardBlock data={data} />);
      case "heroblock":
        return (<HeroBlock data={data} />);
      case "imageblock":
        return (<ImageBlock data={data} />);
      case "newsletterblock":
        return (<NewsletterBlock data={data} />);
      case "textblock":
        return (<TextBlock data={data} />);
    }
  })}
</Layout>